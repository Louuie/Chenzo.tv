{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Elias\\\\Documents\\\\Programming\\\\Chenzo.tv\\\\frontend\\\\chenzo.tv\\\\src\\\\components\\\\Poll\\\\Poll.tsx\",\n    _s = $RefreshSig$();\n\nimport { Suspense, useEffect, useState } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport { collection, doc, onSnapshot, updateDoc } from \"firebase/firestore\";\nimport db from \"../../firebase/firestore\";\nimport PollResults from \"./PollResults\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function Poll() {\n  _s();\n\n  let params = useParams();\n  let [title, setTitle] = useState('');\n  let [votingStatus, setVotingStatus] = useState(false);\n  let [pollingID, setPollingID] = useState('');\n  let [options, setOptions] = useState([]);\n  let [optionOneCount, setOptionOneCount] = useState(0);\n  let [optionTwoCount, setOptionTwoCount] = useState(0);\n  let [optionThreeCount, setOptionThreeCount] = useState(0);\n  let [optionFourCount, setOptionFourCount] = useState(0);\n\n  const onOption1 = async () => {\n    try {\n      let pollRef = doc(db, 'polls', pollingID);\n      await updateDoc(pollRef, {\n        optionACount: optionOneCount\n      });\n      setVotingStatus(true);\n      console.log(`Successfully updated ${pollRef.id}`);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const onOption2 = async () => {\n    try {\n      setOptionTwoCount(optionTwoCount + 1);\n      let pollRef = doc(db, 'polls', pollingID);\n      await updateDoc(pollRef, {\n        optionBCount: optionTwoCount\n      });\n      setVotingStatus(true);\n      console.log(`Successfully updated ${pollRef.id}`);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const onOption3 = async () => {\n    try {\n      setOptionThreeCount(optionThreeCount + 1);\n      let pollRef = doc(db, 'polls', pollingID);\n      await updateDoc(pollRef, {\n        optionBCount: optionThreeCount\n      });\n      setVotingStatus(true);\n      console.log(`Successfully updated ${pollRef.id}`);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  const onOption4 = async () => {\n    try {\n      setOptionFourCount(optionFourCount + 1);\n      let pollRef = doc(db, 'polls', pollingID);\n      await updateDoc(pollRef, {\n        optionBCount: optionFourCount\n      });\n      setVotingStatus(true);\n      console.log(`Successfully updated ${pollRef.id}`);\n    } catch (e) {\n      console.log(e);\n    }\n  };\n\n  useEffect(() => {\n    // let totalVotes = optionOneCount + optionTwoCount + optionThreeCount + optionFourCount;\n    // let votePercentageA = optionOneCount / totalVotes * 100;\n    // let votePercentageB = optionTwoCount / totalVotes * 100;\n    // let votePercentageC = optionThreeCount / totalVotes * 100;\n    // let votePercentageD = optionFourCount / totalVotes * 100;\n    // console.log(`${votePercentageA}% voted for Chenzo`);\n    // console.log(`${votePercentageB}% voted for Marky`);\n    // console.log(`${votePercentageC}% voted for Flax`);\n    // console.log(`${votePercentageD}% voted for Ally`);\n    onSnapshot(collection(db, \"polls\"), snapshot => {\n      snapshot.docs.map(doc => {\n        if (doc.id === params.id) {\n          const data = doc.data();\n          setTitle(data.title);\n          setOptions(data.options);\n          setPollingID(doc.id);\n          setOptionOneCount(data.optionACount);\n          setOptionTwoCount(data.optionBCount);\n          setOptionThreeCount(data.optionCCount);\n          setOptionFourCount(data.optionDCount);\n          console.log(doc.data());\n        }\n      });\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Suspense, {\n    fallback: /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 29\n    }, this),\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      children: !votingStatus ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onOption1,\n          children: options[0]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 74\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onOption2,\n          children: options[1]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 74\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onOption3,\n          children: options[2]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 74\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onOption4,\n          children: options[3]\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 25\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 74\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }, this) : /*#__PURE__*/_jsxDEV(PollResults, {\n        pollID: pollingID\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 99,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Poll, \"oYBAh3V2M+qn5V4GkrwMzSYq0Lg=\", false, function () {\n  return [useParams];\n});\n\n_c = Poll;\n\nvar _c;\n\n$RefreshReg$(_c, \"Poll\");","map":{"version":3,"sources":["C:/Users/Elias/Documents/Programming/Chenzo.tv/frontend/chenzo.tv/src/components/Poll/Poll.tsx"],"names":["Suspense","useEffect","useState","useParams","collection","doc","onSnapshot","updateDoc","db","PollResults","Poll","params","title","setTitle","votingStatus","setVotingStatus","pollingID","setPollingID","options","setOptions","optionOneCount","setOptionOneCount","optionTwoCount","setOptionTwoCount","optionThreeCount","setOptionThreeCount","optionFourCount","setOptionFourCount","onOption1","pollRef","optionACount","console","log","id","e","onOption2","optionBCount","onOption3","onOption4","snapshot","docs","map","data","optionCCount","optionDCount"],"mappings":";;;AAAA,SAAgBA,QAAhB,EAA0BC,SAA1B,EAAqCC,QAArC,QAAsD,OAAtD;AACA,SAASC,SAAT,QAA0B,kBAA1B;AACA,SAASC,UAAT,EAAqBC,GAArB,EAA2CC,UAA3C,EAA+DC,SAA/D,QAAgF,oBAAhF;AACA,OAAOC,EAAP,MAAe,0BAAf;AACA,OAAOC,WAAP,MAAwB,eAAxB;;AAEA,eAAe,SAASC,IAAT,GAAgB;AAAA;;AAE3B,MAAIC,MAAM,GAAGR,SAAS,EAAtB;AACA,MAAI,CAACS,KAAD,EAAQC,QAAR,IAAoBX,QAAQ,CAAC,EAAD,CAAhC;AACA,MAAI,CAACY,YAAD,EAAeC,eAAf,IAAkCb,QAAQ,CAAC,KAAD,CAA9C;AACA,MAAI,CAACc,SAAD,EAAYC,YAAZ,IAA4Bf,QAAQ,CAAC,EAAD,CAAxC;AACA,MAAI,CAACgB,OAAD,EAAUC,UAAV,IAAwBjB,QAAQ,CAAC,EAAD,CAApC;AACA,MAAI,CAACkB,cAAD,EAAiBC,iBAAjB,IAAsCnB,QAAQ,CAAC,CAAD,CAAlD;AACA,MAAI,CAACoB,cAAD,EAAiBC,iBAAjB,IAAsCrB,QAAQ,CAAC,CAAD,CAAlD;AACA,MAAI,CAACsB,gBAAD,EAAmBC,mBAAnB,IAA0CvB,QAAQ,CAAC,CAAD,CAAtD;AACA,MAAI,CAACwB,eAAD,EAAkBC,kBAAlB,IAAwCzB,QAAQ,CAAC,CAAD,CAApD;;AAEA,QAAM0B,SAAS,GAAG,YAAY;AAC1B,QAAI;AACA,UAAIC,OAAO,GAAGxB,GAAG,CAACG,EAAD,EAAK,OAAL,EAAcQ,SAAd,CAAjB;AACA,YAAMT,SAAS,CAACsB,OAAD,EAAU;AACrBC,QAAAA,YAAY,EAAEV;AADO,OAAV,CAAf;AAGAL,MAAAA,eAAe,CAAC,IAAD,CAAf;AACAgB,MAAAA,OAAO,CAACC,GAAR,CAAa,wBAAuBH,OAAO,CAACI,EAAG,EAA/C;AACH,KAPD,CAOE,OAAMC,CAAN,EAAS;AAAEH,MAAAA,OAAO,CAACC,GAAR,CAAYE,CAAZ;AAAiB;AACjC,GATD;;AAYA,QAAMC,SAAS,GAAG,YAAY;AAC1B,QAAI;AACAZ,MAAAA,iBAAiB,CAACD,cAAc,GAAG,CAAlB,CAAjB;AACA,UAAIO,OAAO,GAAGxB,GAAG,CAACG,EAAD,EAAK,OAAL,EAAcQ,SAAd,CAAjB;AACA,YAAMT,SAAS,CAACsB,OAAD,EAAU;AACrBO,QAAAA,YAAY,EAAEd;AADO,OAAV,CAAf;AAGAP,MAAAA,eAAe,CAAC,IAAD,CAAf;AACAgB,MAAAA,OAAO,CAACC,GAAR,CAAa,wBAAuBH,OAAO,CAACI,EAAG,EAA/C;AACH,KARD,CAQE,OAAMC,CAAN,EAAS;AAAEH,MAAAA,OAAO,CAACC,GAAR,CAAYE,CAAZ;AAAiB;AACjC,GAVD;;AAaA,QAAMG,SAAS,GAAG,YAAY;AAC1B,QAAI;AACAZ,MAAAA,mBAAmB,CAACD,gBAAgB,GAAG,CAApB,CAAnB;AACA,UAAIK,OAAO,GAAGxB,GAAG,CAACG,EAAD,EAAK,OAAL,EAAcQ,SAAd,CAAjB;AACA,YAAMT,SAAS,CAACsB,OAAD,EAAU;AACrBO,QAAAA,YAAY,EAAEZ;AADO,OAAV,CAAf;AAGAT,MAAAA,eAAe,CAAC,IAAD,CAAf;AACAgB,MAAAA,OAAO,CAACC,GAAR,CAAa,wBAAuBH,OAAO,CAACI,EAAG,EAA/C;AACH,KARD,CAQE,OAAMC,CAAN,EAAS;AAAEH,MAAAA,OAAO,CAACC,GAAR,CAAYE,CAAZ;AAAiB;AACjC,GAVD;;AAaA,QAAMI,SAAS,GAAG,YAAY;AAC1B,QAAI;AACAX,MAAAA,kBAAkB,CAACD,eAAe,GAAG,CAAnB,CAAlB;AACA,UAAIG,OAAO,GAAGxB,GAAG,CAACG,EAAD,EAAK,OAAL,EAAcQ,SAAd,CAAjB;AACA,YAAMT,SAAS,CAACsB,OAAD,EAAU;AACrBO,QAAAA,YAAY,EAAEV;AADO,OAAV,CAAf;AAGAX,MAAAA,eAAe,CAAC,IAAD,CAAf;AACAgB,MAAAA,OAAO,CAACC,GAAR,CAAa,wBAAuBH,OAAO,CAACI,EAAG,EAA/C;AACH,KARD,CAQE,OAAMC,CAAN,EAAS;AAAEH,MAAAA,OAAO,CAACC,GAAR,CAAYE,CAAZ;AAAiB;AACjC,GAVD;;AAYAjC,EAAAA,SAAS,CAAC,MAAM;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEAK,IAAAA,UAAU,CAACF,UAAU,CAACI,EAAD,EAAK,OAAL,CAAX,EAA2B+B,QAAD,IAAc;AAC9CA,MAAAA,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkBpC,GAAG,IAAI;AACrB,YAAGA,GAAG,CAAC4B,EAAJ,KAAWtB,MAAM,CAACsB,EAArB,EAAyB;AACrB,gBAAMS,IAAI,GAAGrC,GAAG,CAACqC,IAAJ,EAAb;AACA7B,UAAAA,QAAQ,CAAC6B,IAAI,CAAC9B,KAAN,CAAR;AACAO,UAAAA,UAAU,CAACuB,IAAI,CAACxB,OAAN,CAAV;AACAD,UAAAA,YAAY,CAACZ,GAAG,CAAC4B,EAAL,CAAZ;AACAZ,UAAAA,iBAAiB,CAACqB,IAAI,CAACZ,YAAN,CAAjB;AACAP,UAAAA,iBAAiB,CAACmB,IAAI,CAACN,YAAN,CAAjB;AACAX,UAAAA,mBAAmB,CAACiB,IAAI,CAACC,YAAN,CAAnB;AACAhB,UAAAA,kBAAkB,CAACe,IAAI,CAACE,YAAN,CAAlB;AACAb,UAAAA,OAAO,CAACC,GAAR,CAAY3B,GAAG,CAACqC,IAAJ,EAAZ;AACH;AACJ,OAZD;AAaH,KAdS,CAAV;AAeH,GA1BQ,EA0BN,EA1BM,CAAT;AA6BA,sBACI,QAAC,QAAD;AAAU,IAAA,QAAQ,eAAE;AAAA;AAAA;AAAA;AAAA,YAApB;AAAA,2BACI;AAAA,gBACK,CAAC5B,YAAD,gBACG;AAAA,gCACI;AAAA,oBAAKF;AAAL;AAAA;AAAA;AAAA;AAAA,gBADJ,eAEI;AAAQ,UAAA,OAAO,EAAEgB,SAAjB;AAAA,oBAA6BV,OAAO,CAAC,CAAD;AAApC;AAAA;AAAA;AAAA;AAAA,gBAFJ,eAEqD;AAAA;AAAA;AAAA;AAAA,gBAFrD,eAGI;AAAQ,UAAA,OAAO,EAAEiB,SAAjB;AAAA,oBAA6BjB,OAAO,CAAC,CAAD;AAApC;AAAA;AAAA;AAAA;AAAA,gBAHJ,eAGqD;AAAA;AAAA;AAAA;AAAA,gBAHrD,eAII;AAAQ,UAAA,OAAO,EAAEmB,SAAjB;AAAA,oBAA6BnB,OAAO,CAAC,CAAD;AAApC;AAAA;AAAA;AAAA;AAAA,gBAJJ,eAIqD;AAAA;AAAA;AAAA;AAAA,gBAJrD,eAKI;AAAQ,UAAA,OAAO,EAAEoB,SAAjB;AAAA,oBAA6BpB,OAAO,CAAC,CAAD;AAApC;AAAA;AAAA;AAAA;AAAA,gBALJ,eAKqD;AAAA;AAAA;AAAA;AAAA,gBALrD;AAAA;AAAA;AAAA;AAAA;AAAA,cADH,gBASG,QAAC,WAAD;AAAa,QAAA,MAAM,EAAEF;AAArB;AAAA;AAAA;AAAA;AAAA;AAVR;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,UADJ;AAiBH;;GA5GuBN,I;UAEPP,S;;;KAFOO,I","sourcesContent":["import react, { Suspense, useEffect, useState, } from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { collection, doc, getDoc, getDocs, onSnapshot, setDoc, updateDoc } from \"firebase/firestore\";\r\nimport db from \"../../firebase/firestore\";\r\nimport PollResults from \"./PollResults\";\r\n\r\nexport default function Poll() {\r\n    \r\n    let params = useParams();\r\n    let [title, setTitle] = useState('');\r\n    let [votingStatus, setVotingStatus] = useState(false);\r\n    let [pollingID, setPollingID] = useState('');\r\n    let [options, setOptions] = useState([]);\r\n    let [optionOneCount, setOptionOneCount] = useState(0);\r\n    let [optionTwoCount, setOptionTwoCount] = useState(0);\r\n    let [optionThreeCount, setOptionThreeCount] = useState(0);\r\n    let [optionFourCount, setOptionFourCount] = useState(0);\r\n\r\n    const onOption1 = async () => {\r\n        try {\r\n            let pollRef = doc(db, 'polls', pollingID);\r\n            await updateDoc(pollRef, {\r\n                optionACount: optionOneCount\r\n            })\r\n            setVotingStatus(true);\r\n            console.log(`Successfully updated ${pollRef.id}`);\r\n        } catch(e) { console.log(e); }\r\n    };\r\n\r\n    \r\n    const onOption2 = async () => {\r\n        try {\r\n            setOptionTwoCount(optionTwoCount + 1);\r\n            let pollRef = doc(db, 'polls', pollingID);\r\n            await updateDoc(pollRef, {\r\n                optionBCount: optionTwoCount\r\n            })\r\n            setVotingStatus(true);\r\n            console.log(`Successfully updated ${pollRef.id}`);\r\n        } catch(e) { console.log(e); }\r\n    };\r\n\r\n    \r\n    const onOption3 = async () => {\r\n        try {\r\n            setOptionThreeCount(optionThreeCount + 1);\r\n            let pollRef = doc(db, 'polls', pollingID);\r\n            await updateDoc(pollRef, {\r\n                optionBCount: optionThreeCount\r\n            })\r\n            setVotingStatus(true);\r\n            console.log(`Successfully updated ${pollRef.id}`);\r\n        } catch(e) { console.log(e); }\r\n    };\r\n\r\n    \r\n    const onOption4 = async () => {\r\n        try {\r\n            setOptionFourCount(optionFourCount + 1);\r\n            let pollRef = doc(db, 'polls', pollingID);\r\n            await updateDoc(pollRef, {\r\n                optionBCount: optionFourCount\r\n            })\r\n            setVotingStatus(true);\r\n            console.log(`Successfully updated ${pollRef.id}`);\r\n        } catch(e) { console.log(e); }\r\n    };\r\n\r\n    useEffect(() => {\r\n        // let totalVotes = optionOneCount + optionTwoCount + optionThreeCount + optionFourCount;\r\n        // let votePercentageA = optionOneCount / totalVotes * 100;\r\n        // let votePercentageB = optionTwoCount / totalVotes * 100;\r\n        // let votePercentageC = optionThreeCount / totalVotes * 100;\r\n        // let votePercentageD = optionFourCount / totalVotes * 100;\r\n        // console.log(`${votePercentageA}% voted for Chenzo`);\r\n        // console.log(`${votePercentageB}% voted for Marky`);\r\n        // console.log(`${votePercentageC}% voted for Flax`);\r\n        // console.log(`${votePercentageD}% voted for Ally`);\r\n\r\n        onSnapshot(collection(db, \"polls\"), (snapshot) => {\r\n            snapshot.docs.map(doc => {\r\n                if(doc.id === params.id) {\r\n                    const data = doc.data();\r\n                    setTitle(data.title);\r\n                    setOptions(data.options);\r\n                    setPollingID(doc.id);\r\n                    setOptionOneCount(data.optionACount);\r\n                    setOptionTwoCount(data.optionBCount);\r\n                    setOptionThreeCount(data.optionCCount);\r\n                    setOptionFourCount(data.optionDCount);\r\n                    console.log(doc.data());\r\n                }\r\n            });\r\n        });\r\n    }, []);\r\n\r\n\r\n    return (\r\n        <Suspense fallback={<div></div>}>\r\n            <div>\r\n                {!votingStatus ? (\r\n                    <div>\r\n                        <h1>{title}</h1>\r\n                        <button onClick={onOption1}>{options[0]}</button><br></br>\r\n                        <button onClick={onOption2}>{options[1]}</button><br></br>\r\n                        <button onClick={onOption3}>{options[2]}</button><br></br>\r\n                        <button onClick={onOption4}>{options[3]}</button><br></br>\r\n                    </div>\r\n                ) : (\r\n                    <PollResults pollID={pollingID} />\r\n                )}\r\n            </div>\r\n        </Suspense>\r\n    )\r\n}"]},"metadata":{},"sourceType":"module"}